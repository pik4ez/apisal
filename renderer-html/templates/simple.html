<!doctype html>
<html>
<head>
    <title>АПИ Сал вам аписал</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full"></script>
    <style>
        ul {list-style: none; margin: 0}
        li {margin: 0 10px}
        .footer {height: 7em; background: darkgreen; color: white}
        .footer-text {box-sizing: border-box; padding: 2em}
    </style>
</head>
<body>
<div class="pure-g">
    <div class="pure-u-1-1">
        <div id="map" style="width:100%; height:400px; background: darkgreen"></div>
    </div>
</div>
<script type="text/javascript">
    var map;
    DG.then(function () {
        map = DG.map('map', {
            center: [{{.AvgPoint.Lat}}, {{.AvgPoint.Lon}}],
            zoom: 6,
            scrollWheelZoom: false
        });

        var latlngs = [
        {{range .Objects}}
            [{{.Point.Lat}},{{.Point.Lon}}],
        {{end}}
        ];

        var polyline = DG.polyline(latlngs, {color: '#ff5500'}).addTo(map);
        map.fitBounds(polyline.getBounds())
    });
</script>
<!--div class="pure-g">
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
    <div class="pure-u-22-24 pure-u-lg-20-24">
        456
    </div>
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
</div-->


{{range .Objects}}
<div class="pure-g">
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
    <div class="pure-u-22-24 pure-u-lg-20-24">
        <h2>{{.Title}}</h2>
        <p>{{.Description}}</p>
        <sup>{{.Point.Lat}},{{.Point.Lon}}</sup>
        {{if .Images}}
        <ul>
            {{range .Images}}
            <li><img src="{{.Url}}" title="{{.Title}}"/></li>
            {{end}}
        </ul>
        {{end}}
    </div>
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
</div>
{{else}}
    <div>Сорян, нет объектов.</div>
{{end}}

<div class="pure-g footer">
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
    <div class="pure-u-22-24 pure-u-lg-20-24 footer-text">
        ПОДЕЛИТЬСЯ
    </div>
    <div class="pure-u-1-24 pure-u-lg-2-24"></div>
</div>

</body>
</html>
